{% extends 'base.html' %}

{% block title %}{{ title }} - –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω{% endblock %}

{% block extra_css %}
<style>
    .registration-form {
        max-width: 600px;
        margin: 0 auto;
    }
    .form-group {
        margin-bottom: 1.5rem;
    }
    .form-help {
        font-size: 0.875rem;
        color: #6c757d;
    }
    .password-requirements {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
        padding: 1rem;
        margin-top: 0.5rem;
    }
    .requirement {
        display: flex;
        align-items: center;
        margin-bottom: 0.25rem;
    }
    .requirement .icon {
        margin-right: 0.5rem;
        width: 1rem;
        text-align: center;
    }
    .invalid-feedback {
        display: block;
    }
</style>
{% endblock %}

{% block page_header %}
<div class="row">
    <div class="col-12">
        <h1 class="h2">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞</h1>
        <p class="text-muted">–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞</p>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="registration-form">
    <div class="card">
        <div class="card-header">
            <h5 class="card-title mb-0">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h5>
        </div>
        <div class="card-body">
            <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
            <form method="post" novalidate>
                {% csrf_token %}
                
                <!-- Email –∞–¥—Ä–µ—Å -->
                <div class="form-group">
                    <label for="{{ form.email.id_for_label }}" class="form-label">
                        <strong>{{ form.email.label }}</strong>
                        <span class="text-danger">*</span>
                    </label>
                    {{ form.email }}
                    {% if form.email.help_text %}
                        <div class="form-help">{{ form.email.help_text }}</div>
                    {% endif %}
                    {% if form.email.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.email.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <!-- –ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="{{ form.first_name.id_for_label }}" class="form-label">
                                {{ form.first_name.label }}
                            </label>
                            {{ form.first_name }}
                            {% if form.first_name.help_text %}
                                <div class="form-help">{{ form.first_name.help_text }}</div>
                            {% endif %}
                            {% if form.first_name.errors %}
                                <div class="invalid-feedback">
                                    {% for error in form.first_name.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="{{ form.last_name.id_for_label }}" class="form-label">
                                {{ form.last_name.label }}
                            </label>
                            {{ form.last_name }}
                            {% if form.last_name.help_text %}
                                <div class="form-help">{{ form.last_name.help_text }}</div>
                            {% endif %}
                            {% if form.last_name.errors %}
                                <div class="invalid-feedback">
                                    {% for error in form.last_name.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
                <div class="form-group">
                    <label for="{{ form.phone_number.id_for_label }}" class="form-label">
                        {{ form.phone_number.label }}
                    </label>
                    {{ form.phone_number }}
                    {% if form.phone_number.help_text %}
                        <div class="form-help">{{ form.phone_number.help_text }}</div>
                    {% endif %}
                    {% if form.phone_number.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.phone_number.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <!-- –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ -->
                <div class="form-group">
                    <label for="{{ form.address.id_for_label }}" class="form-label">
                        {{ form.address.label }}
                    </label>
                    {{ form.address }}
                    {% if form.address.help_text %}
                        <div class="form-help">{{ form.address.help_text }}</div>
                    {% endif %}
                    {% if form.address.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.address.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <!-- –ü–∞—Ä–æ–ª—å -->
                <div class="form-group">
                    <label for="{{ form.password1.id_for_label }}" class="form-label">
                        <strong>{{ form.password1.label }}</strong>
                        <span class="text-danger">*</span>
                    </label>
                    {{ form.password1 }}
                    {% if form.password1.help_text %}
                        <div class="form-help">{{ form.password1.help_text }}</div>
                    {% endif %}
                    
                    <!-- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–∞—Ä–æ–ª—é -->
                    <div class="password-requirements">
                        <small class="text-muted">
                            <strong>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–∞—Ä–æ–ª—é:</strong>
                        </small>
                        <div class="requirement">
                            <span class="icon">‚Ä¢</span>
                            <span>–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤</span>
                        </div>
                        <div class="requirement">
                            <span class="icon">‚Ä¢</span>
                            <span>–ù–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –ø—Ä–æ—Å—Ç—ã–º</span>
                        </div>
                        <div class="requirement">
                            <span class="icon">‚Ä¢</span>
                            <span>–ù–µ –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ —Ü–∏—Ñ—Ä</span>
                        </div>
                    </div>
                    
                    {% if form.password1.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.password1.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <!-- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è -->
                <div class="form-group">
                    <label for="{{ form.password2.id_for_label }}" class="form-label">
                        <strong>{{ form.password2.label }}</strong>
                        <span class="text-danger">*</span>
                    </label>
                    {{ form.password2 }}
                    {% if form.password2.help_text %}
                        <div class="form-help">{{ form.password2.help_text }}</div>
                    {% endif %}
                    {% if form.password2.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.password2.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <!-- –°–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏ -->
                <div class="form-group">
                    <div class="form-check">
                        {{ form.terms_accepted }}
                        <label for="{{ form.terms_accepted.id_for_label }}" class="form-check-label">
                            {{ form.terms_accepted.label }}
                            <span class="text-danger">*</span>
                        </label>
                    </div>
                    {% if form.terms_accepted.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.terms_accepted.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ -->
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <a href="{% url 'accounts:home' %}" class="btn btn-secondary me-md-2">
                        –û—Ç–º–µ–Ω–∞
                    </a>
                    <button type="submit" class="btn btn-primary">
                        üìù –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="card mt-4">
        <div class="card-body">
            <h6 class="card-title">‚ÑπÔ∏è –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏?</h6>
            <ol class="mb-0">
                <li>–ù–∞ –≤–∞—à email –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–∏—Å—å–º–æ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º</li>
                <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –≤ –ø–∏—Å—å–º–µ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞</li>
                <li>–ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</li>
                <li>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω!</li>
            </ol>
        </div>
    </div>

    <!-- –°—Å—ã–ª–∫–∞ –Ω–∞ –≤—Ö–æ–¥ -->
    <div class="text-center mt-4">
        <p class="text-muted">
            –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? 
            <a href="{% url 'accounts:login' %}" class="text-decoration-none">
                –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
            </a>
        </p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // –î–æ–±–∞–≤–ª—è–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ–ª–µ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    const form = document.querySelector('form');
    const inputs = form.querySelectorAll('input[required]');
    
    inputs.forEach(input => {
        input.addEventListener('blur', function() {
            if (this.value.trim() === '') {
                this.classList.add('is-invalid');
            } else {
                this.classList.remove('is-invalid');
                this.classList.add('is-valid');
            }
        });
    });

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
    const password1 = document.getElementById('{{ form.password1.id_for_label }}');
    const password2 = document.getElementById('{{ form.password2.id_for_label }}');
    
    if (password2) {
        password2.addEventListener('input', function() {
            if (password1.value !== password2.value) {
                password2.classList.add('is-invalid');
                password2.classList.remove('is-valid');
            } else {
                password2.classList.remove('is-invalid');
                password2.classList.add('is-valid');
            }
        });
    }
});
</script>
{% endblock %}
